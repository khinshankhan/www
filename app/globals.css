@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light dark;

    --inherit: inherit;
    --current: currentColor;
    --transparent: transparent;
    --black: 0 0% 0%;
    --white: 0 100% 100%;

    --sky-50: 204 100% 97.1%;
    --sky-100: 204 93.8% 93.7%;
    --sky-200: 200.6 94.4% 86.1%;
    --sky-300: 199.4 95.5% 73.9%;
    --sky-400: 198.4 93.2% 59.6%;
    --sky-500: 198.6 88.7% 48.4%;
    --sky-600: 200.4 98% 39.4%;
    --sky-700: 201.3 96.3% 32.2%;
    --sky-800: 201 90% 27.5%;
    --sky-900: 202 80.3% 23.9%;
    --sky-950: 204 80.2% 15.9%;

    --emerald-50: 151.8 81% 95.9%;
    --emerald-100: 149.3 80.4% 90%;
    --emerald-200: 152.4 76% 80.4%;
    --emerald-300: 156.2 71.6% 66.9%;
    --emerald-400: 158.1 64.4% 51.6%;
    --emerald-500: 160.1 84.1% 39.4%;
    --emerald-600: 161.4 93.5% 30.4%;
    --emerald-700: 162.9 93.5% 24.3%;
    --emerald-800: 163.1 88.1% 19.8%;
    --emerald-900: 164.2 85.7% 16.5%;
    --emerald-950: 165.7 91.3% 9%;

    --indigo-50: 225.9 100% 96.7%;
    --indigo-100: 226.5 100% 93.9%;
    --indigo-200: 228 96.5% 88.8%;
    --indigo-300: 229.7 93.5% 81.8%;
    --indigo-400: 234.5 89.5% 73.9%;
    --indigo-500: 238.7 83.5% 66.7%;
    --indigo-600: 243.4 75.4% 58.6%;
    --indigo-700: 244.5 57.9% 50.6%;
    --indigo-800: 243.7 54.5% 41.4%;
    --indigo-900: 242.2 47.4% 34.3%;
    --indigo-950: 243.8 47.1% 20%;

    --amber-50: 48 100% 96.1%;
    --amber-100: 48 96.5% 88.8%;
    --amber-200: 48 96.6% 76.7%;
    --amber-300: 45.9 96.7% 64.5%;
    --amber-400: 43.3 96.4% 56.3%;
    --amber-500: 37.7 92.1% 50.2%;
    --amber-600: 32.1 94.6% 43.7%;
    --amber-700: 26 90.5% 37.1%;
    --amber-800: 22.7 82.5% 31.4%;
    --amber-900: 21.7 77.8% 26.5%;
    --amber-950: 20.9 91.7% 14.1%;

    --rose-50: 355.7 100% 97.3%;
    --rose-100: 355.6 100% 94.7%;
    --rose-200: 352.7 96.1% 90%;
    --rose-300: 352.6 95.7% 81.8%;
    --rose-400: 351.3 94.5% 71.4%;
    --rose-500: 349.7 89.2% 60.2%;
    --rose-600: 346.8 77.2% 49.8%;
    --rose-700: 345.3 82.7% 40.8%;
    --rose-800: 343.4 79.7% 34.7%;
    --rose-900: 341.5 75.5% 30.4%;
    --rose-950: 343.1 87.7% 15.9%;

    --celestial-50: 240 40% 98%;
    --celestial-100: 240 40% 96.1%;
    --celestial-200: 240 31.8% 91.4%;
    --celestial-300: 240 26.8% 83.9%;
    --celestial-400: 240 20.2% 65.1%;
    --celestial-500: 240 16.3% 46.9%;
    --celestial-600: 240 19.3% 34.5%;
    --celestial-700: 240 25% 26.7%;
    --celestial-800: 240 32.6% 17.5%;
    --celestial-900: 240 47.4% 11.2%;
    --celestial-950: 240 84% 4.9%;

    --brand-50: var(--celestial-50);
    --brand-100: var(--celestial-100);
    --brand-200: var(--celestial-200);
    --brand-300: var(--celestial-300);
    --brand-400: var(--celestial-400);
    --brand-500: var(--celestial-500);
    --brand-600: var(--celestial-600);
    --brand-700: var(--celestial-700);
    --brand-800: var(--celestial-800);
    --brand-900: var(--celestial-900);
    --brand-950: var(--celestial-950);

    --plum1: 301 20% 9.4%;
    --plum2: 300 29.8% 11.2%;
    --plum3: 298 34.4% 15.3%;
    --plum4: 297 36.8% 18.3%;
    --plum5: 296 38.5% 21.1%;
    --plum6: 295 40.4% 24.7%;
    --plum7: 294 42.7% 30.6%;
    --plum8: 292 45.1% 40%;
    --plum9: 292 45% 51%;
    --plum10: 295 50% 55.4%;
    --plum11: 300 60% 62%;
    --plum12: 296 74% 95.7%;

    --icons-anchor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' fill='currentColor' d='m22 15-3-4-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z'/%3E%3C/svg%3E");
  }

  :root,
  .light {
    --background: var(--brand-100);
    --foreground: var(--brand-950);
    --knockout: var(--brand-950);
    --border: var(--brand-200);

    --content: var(--brand-50);
    --content-foreground: var(--brand-950);

    --primary: var(--brand-900);
    --primary-foreground: var(--brand-50);

    --secondary: var(--brand-200);
    --secondary-foreground: var(--brand-900);

    --muted: var(--brand-200);
    --muted-foreground: var(--brand-500);

    --accent: var(--brand-200);
    --accent-foreground: var(--brand-900);

    --border: var(--brand-200);
    --input: var(--brand-200);
    --ring: var(--brand-950);

    --popover: var(--white);
    --popover-foreground: var(--brand-950);

    --link-border: var(--plum7);
    --link-border-active: var(--plum5);

    --info-background: var(--sky-100);
    --info-foreground: var(--sky-900);
    --info-link-border: var(--sky-600);
    --info-link-border-active: var(--sky-400);
    --info-border: var(--sky-600);

    --success-background: var(--emerald-100);
    --success-foreground: var(--emerald-900);
    --success-link-border: var(--emerald-600);
    --success-link-border-active: var(--emerald-400);
    --success-border: var(--emerald-600);

    --critical-background: var(--indigo-100);
    --critical-foreground: var(--indigo-900);
    --critical-link-border: var(--indigo-600);
    --critical-link-border-active: var(--indigo-400);
    --critical-border: var(--indigo-600);

    --warning-background: var(--amber-100);
    --warning-foreground: var(--amber-900);
    --warning-link-border: var(--amber-600);
    --warning-link-border-active: var(--amber-400);
    --warning-border: var(--amber-600);

    --danger-background: var(--rose-100);
    --danger-foreground: var(--rose-900);
    --danger-link-border: var(--rose-600);
    --danger-link-border-active: var(--rose-400);
    --danger-border: var(--rose-600);

    --logo: var(--transparent);
    --logo-foreground: var(--foreground);
    --logo-border: var(--transparent);
    --logo-shadow: 0, 0%, 43.5%;
  }

  .light {
    color-scheme: light;
  }

  .dark {
    color-scheme: dark;

    --plum1: 292 90% 99.4%;
    --plum2: 300 100% 98.6%;
    --plum3: 299 71.2% 96.4%;
    --plum4: 299 62% 93.8%;
    --plum5: 298 56.1% 90.5%;
    --plum6: 296 51.3% 85.8%;
    --plum7: 295 48.2% 78.9%;
    --plum8: 292 47.7% 70.8%;
    --plum9: 292 45% 51%;
    --plum10: 292 50.2% 46.9%;
    --plum11: 292 60% 42.5%;
    --plum12: 291 66% 14%;

    --background: var(--brand-950);
    --foreground: var(--brand-50);
    --knockout: var(--brand-50);
    --border: var(--brand-800);

    --content: var(--brand-900);
    --content-foreground: var(--brand-50);

    --primary: var(--brand-50);
    --primary-foreground: var(--brand-800);

    --secondary: var(--brand-700);
    --secondary-foreground: var(--brand-50);

    --muted: var(--brand-800);
    --muted-foreground: var(--brand-400);

    --accent: var(--brand-800);
    --accent-foreground: var(--brand-50);

    --border: var(--brand-200);
    --input: var(--brand-800);
    --ring: var(--brand-300);

    --popover: var(--brand-950);
    --popover-foreground: var(--brand-50);

    --link-border: var(--plum8);
    --link-border-active: var(--plum6);

    --info-background: var(--sky-900);
    --info-foreground: var(--sky-100);
    --info-link-border: var(--sky-400);
    --info-link-border-active: var(--sky-600);
    --info-border: var(--sky-400);

    --success-background: var(--emerald-900);
    --success-foreground: var(--emerald-100);
    --success-link-border: var(--emerald-400);
    --success-link-border-active: var(--emerald-600);
    --success-border: var(--emerald-400);

    --critical-background: var(--indigo-900);
    --critical-foreground: var(--indigo-100);
    --critical-link-border: var(--indigo-400);
    --critical-link-border-active: var(--indigo-600);
    --critical-border: var(--indigo-400);

    --warning-background: var(--amber-900);
    --warning-foreground: var(--amber-100);
    --warning-link-border: var(--amber-400);
    --warning-link-border-active: var(--amber-600);
    --warning-border: var(--amber-400);

    --danger-background: var(--rose-900);
    --danger-foreground: var(--rose-100);
    --danger-link-border: var(--rose-400);
    --danger-link-border-active: var(--rose-600);
    --danger-border: var(--rose-400);
  }

  * {
    @apply border-border;

    /* help hide some weird effects, apparently all is bad so declare each property explicitly */
    transition: background-color 0.4s ease-in-out;
  }

  html {
    touch-action: manipulation;
    scroll-behavior: smooth;
  }

  body {
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
  }

  .page-container {
    @apply mx-auto w-full max-w-[95%] px-0 sm:max-w-[90%] sm:px-[1.5rem] xl:max-w-[1280px] 2xl:max-w-[1450px];
  }

  .content-container {
    @apply mx-auto w-full max-w-[95%] px-0 sm:max-w-[90%] sm:px-[1.5rem] xl:max-w-[1050px] 2xl:max-w-[1200px];
  }

  .content-container-with-sidebar {
    @apply max-w-full xl:max-w-[800px] 2xl:max-w-[950px];
  }
}

@layer components {
  .home-link {
    & svg {
      box-shadow: 0px 0px 10px 1px hsl(var(--logo-shadow));
    }
    & .fg {
      transition: transform 0.3s ease-in-out;
    }
    & .border {
      transition: all 1s ease;
    }

    &:is(:hover, :focus, :focus-visible) {
      & .fg {
        transform: translate(-50px, -50px) scale(1.25);
      }
      & .bg {
        fill: var(var(--transparent));
      }
      & .border {
        stroke: hsl(var(--link-border));
      }
    }
  }

  .anchor-link {
    /* since color of url in content can't easily be adjusted, use the mask trick instead https://stackoverflow.com/a/66093928/7413060 */
    &:after {
      content: "";
      display: inline-block;
      margin: 0 0.125em;
      margin-left: -1em;
      width: 1em;
      height: 1em;
      /* these are kind of magic numbers based off a few trial and errors on one machine */
      transform: scale(0.85) translateY(0.15em);
      mask-image: var(--icons-anchor);
      mask-size: cover;
      background-color: transparent;
      @media (prefers-reduced-motion: no-preference) {
        transition:
          background-color 0.3s ease-out,
          margin 0.5s ease-in-out;
      }
    }
    &:hover:after {
      background-color: currentColor;
      margin-left: 0.125em;
      @media (prefers-reduced-motion: no-preference) {
        transition:
          background-color 0.7s ease-in,
          margin 0.5s ease-in-out;
      }
    }
  }

  .info-theme {
    --background: var(--info-background);
    --foreground: var(--info-foreground);
    --link-border: var(--info-link-border);
    --link-border-active: var(--info-link-border-active);
    --border: var(--info-border);
  }

  .success-theme {
    --background: var(--success-background);
    --foreground: var(--success-foreground);
    --link-border: var(--success-link-border);
    --link-border-active: var(--success-link-border-active);
    --border: var(--success-border);
  }

  .critical-theme {
    --background: var(--critical-background);
    --foreground: var(--critical-foreground);
    --link-border: var(--critical-link-border);
    --link-border-active: var(--critical-link-border-active);
    --border: var(--critical-border);
  }

  .warning-theme {
    --background: var(--warning-background);
    --foreground: var(--warning-foreground);
    --link-border: var(--warning-link-border);
    --link-border-active: var(--warning-link-border-active);
    --border: var(--warning-border);
  }

  .danger-theme {
    --background: var(--danger-background);
    --foreground: var(--danger-foreground);
    --link-border: var(--danger-link-border);
    --link-border-active: var(--danger-link-border-active);
    --border: var(--danger-border);
  }

  .normalize {
    /* general spacing of content */
    & > * {
      @apply mb-[1.25rem] md:mb-[1.375rem] lg:mb-[1.5rem];
    }
  }
}

@layer utilities {
  .hide-mobile {
    @apply isMobile:hidden !important;
  }
  .hide-desktop {
    @apply isDesktop:hidden !important;
  }

  .mask-gradient-reveal-from-left {
    mask-image: linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 1) 50%),
      linear-gradient(to top, transparent 0%, rgba(255, 255, 255, 1) 50%),
      linear-gradient(to left, transparent 0%, rgba(255, 255, 255, 1) 40%);
    mask-size: cover;
    mask-composite: intersect;
  }

  .mask-gradient-reveal-from-right {
    mask-image: linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 1) 50%),
      linear-gradient(to top, transparent 0%, rgba(255, 255, 255, 1) 50%),
      linear-gradient(to right, transparent 0%, rgba(255, 255, 255, 1) 40%);
    mask-size: cover;
    mask-composite: intersect;
  }

  .mask-gradient-reveal-center {
    mask-image: linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 1) 50%),
      linear-gradient(to top, transparent 0%, rgba(255, 255, 255, 1) 50%),
      linear-gradient(to right, transparent 0%, rgba(255, 255, 255, 1) 40%),
      linear-gradient(to left, transparent 0%, rgba(255, 255, 255, 1) 40%);
    mask-size: cover;
    mask-composite: intersect;
  }

  /* animations */
  .animated-collapsible {
    @apply overflow-hidden data-[state=closed]:animate-collapsible-close data-[state=open]:animate-collapsible-open;
  }

  .animated-arrow {
    @apply transition-transform duration-300 ease-arrow-ease group-data-[state=closed]:-rotate-90;
  }
}
