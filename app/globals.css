@tailwind base;
@tailwind components;
@tailwind utilities;
@tailwind variants;

@layer base {
  /* color palette */
  :root,
  .light {
    --transparent: transparent;
    --black: 0, 100%, 0%;
    --white: 0, 100%, 100%;

    --gray1: 0, 0%, 99%;
    --gray2: 0, 0%, 97.3%;
    --gray3: 0, 0%, 95.1%;
    --gray4: 0, 0%, 93%;
    --gray5: 0, 0%, 90.9%;
    --gray6: 0, 0%, 88.7%;
    --gray7: 0, 0%, 85.8%;
    --gray8: 0, 0%, 78%;
    --gray9: 0, 0%, 56.1%;
    --gray10: 0, 0%, 52.3%;
    --gray11: 0, 0%, 43.5%;
    --gray12: 0, 0%, 9%;

    --mauve1: 300, 20%, 99%;
    --mauve2: 300, 7.7%, 97.5%;
    --mauve3: 294, 5.5%, 95.3%;
    --mauve4: 289, 4.7%, 93.3%;
    --mauve5: 283, 4.4%, 91.3%;
    --mauve6: 278, 4.1%, 89.1%;
    --mauve7: 271, 3.9%, 86.3%;
    --mauve8: 255, 3.7%, 78.8%;
    --mauve9: 252, 4%, 57.3%;
    --mauve10: 253, 3.5%, 53.5%;
    --mauve11: 252, 4%, 44.8%;
    --mauve12: 260, 25%, 11%;

    --plum1: 301, 20%, 9.4%;
    --plum2: 300, 29.8%, 11.2%;
    --plum3: 298, 34.4%, 15.3%;
    --plum4: 297, 36.8%, 18.3%;
    --plum5: 296, 38.5%, 21.1%;
    --plum6: 295, 40.4%, 24.7%;
    --plum7: 294, 42.7%, 30.6%;
    --plum8: 292, 45.1%, 40%;
    --plum9: 292, 45%, 51%;
    --plum10: 295, 50%, 55.4%;
    --plum11: 300, 60%, 62%;
    --plum12: 296, 74%, 95.7%;

    --violet1: 255, 65%, 99.4%;
    --violet2: 252, 100%, 99%;
    --violet3: 252, 96.9%, 97.4%;
    --violet4: 252, 91.5%, 95.5%;
    --violet5: 252, 85.1%, 93%;
    --violet6: 252, 77.8%, 89.4%;
    --violet7: 252, 71%, 83.7%;
    --violet8: 252, 68.6%, 76.3%;
    --violet9: 252, 56%, 57.5%;
    --violet10: 251, 48.1%, 53.5%;
    --violet11: 250, 43%, 48%;
    --violet12: 254, 60%, 18.5%;

    /* custom colors */
    /* I tried, oh well */
    --bluegray1: 225, 20%, 99%;
    --bluegray2: 230, 25%, 98%;
    --bluegray3: 230, 25%, 96%;
    --bluegray4: 230, 25%, 92%;
    --bluegray5: 230, 25%, 90%;
    --bluegray6: 230, 25%, 78%;
    --bluegray7: 230, 25%, 34%;
    --bluegray8: 230, 25%, 13%;
    --bluegray9: 230, 21%, 11%;
    --bluegray10: 232, 25%, 10%;
    --bluegray11: 235, 27%, 9%;
    --bluegray12: 240, 30%, 8%;
  }

  .dark {
    --gray1: 0, 0%, 8.5%;
    --gray2: 0, 0%, 11%;
    --gray3: 0, 0%, 13.6%;
    --gray4: 0, 0%, 15.8%;
    --gray5: 0, 0%, 17.9%;
    --gray6: 0, 0%, 20.5%;
    --gray7: 0, 0%, 24.3%;
    --gray8: 0, 0%, 31.2%;
    --gray9: 0, 0%, 43.9%;
    --gray10: 0, 0%, 49.4%;
    --gray11: 0, 0%, 62.8%;
    --gray12: 0, 0%, 93%;

    --mauve1: 246, 6%, 9%;
    --mauve2: 240, 5.1%, 11.6%;
    --mauve3: 241, 5%, 14.3%;
    --mauve4: 242, 4.9%, 16.5%;
    --mauve5: 243, 4.9%, 18.8%;
    --mauve6: 244, 4.9%, 21.5%;
    --mauve7: 245, 4.9%, 25.4%;
    --mauve8: 247, 4.8%, 32.5%;
    --mauve9: 252, 4%, 45.2%;
    --mauve10: 247, 3.4%, 50.7%;
    --mauve11: 253, 4%, 63.7%;
    --mauve12: 256, 6%, 93.2%;

    --plum1: 292, 90%, 99.4%;
    --plum2: 300, 100%, 98.6%;
    --plum3: 299, 71.2%, 96.4%;
    --plum4: 299, 62%, 93.8%;
    --plum5: 298, 56.1%, 90.5%;
    --plum6: 296, 51.3%, 85.8%;
    --plum7: 295, 48.2%, 78.9%;
    --plum8: 292, 47.7%, 70.8%;
    --plum9: 292, 45%, 51%;
    --plum10: 292, 50.2%, 46.9%;
    --plum11: 292, 60%, 42.5%;
    --plum12: 291, 66%, 14%;

    --violet1: 250, 20%, 10.2%;
    --violet2: 255, 30.3%, 12.9%;
    --violet3: 253, 37%, 18.4%;
    --violet4: 252, 40.1%, 22.5%;
    --violet5: 252, 42.2%, 26.2%;
    --violet6: 251, 44.3%, 31.1%;
    --violet7: 250, 46.8%, 38.9%;
    --violet8: 250, 51.8%, 51.2%;
    --violet9: 252, 56%, 57.5%;
    --violet10: 251, 63.2%, 63.2%;
    --violet11: 250, 95%, 76.8%;
    --violet12: 252, 87%, 96.4%;
  }

  /* semantic tokens */
  :root,
  .light {
    /* https://yoksel.github.io/url-encoder/ */
    --icons-anchor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' fill='currentColor' d='m22 15-3-4-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z'/%3E%3C/svg%3E");

    --theme-stark: var(--black);
    --ghost: hsla(var(--theme-stark), 0.12);
    --theme-primary: var(--mauve4);
    --theme-content: var(--mauve1);
    --theme-muted: var(--bluegray7);
    --theme-card: var(--mauve1);
    --theme-popover: var(--mauve6);
    --theme-tooltip: var(--theme-popover);

    --logo-fg: var(--theme-stark);
    --logo-bg: var(--transparent);
    --logo-border: var(--transparent);
    --logo-shadow: var(--gray11);

    --link-base: var(--plum8);
    --link-active: var(--plum6);
    --link-on: var(--plum4);
  }

  .dark {
    --theme-stark: var(--white);
    --theme-primary: var(--bluegray12);
    --theme-content: var(--bluegray9);
    --theme-muted: var(--bluegray6);
    --theme-card: var(--bluegray8);
    --theme-popover: var(--bluegray7);

    --logo-shadow: var(--white);
  }

  /* help hide some weird effects, apparently all is bad so declare each property explicitly */
  html * {
    transition: background-color 0.4s ease-in-out, height 0.4s ease-in-out, width 0.4s ease-in-out,
      max-height 0.4s ease-in-out, max-width 0.4s ease-in-out;
  }

  body {
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  .page-container {
    @apply mx-auto w-full max-w-[95%] px-0 sm:max-w-[90%] sm:px-[1.5rem] xl:max-w-[1280px] 2xl:max-w-[1325px];
  }

  .typography-transition {
    transition: font-size 0.4s ease-in-out, display 0.4s ease-in-out;
  }

  /* based off https://github.com/chakra-ui/chakra-ui/blob/main/packages/components/layout/src/link-box.tsx */
  .link-overlay {
    position: static;
    &:after {
      content: "";
      cursor: inherit;
      transition: transform 0.3s ease;
      @apply absolute left-0 top-0 z-0 block h-full w-full;
    }
  }

  .link-box {
    @apply relative isolate;
    /* elevate elements that are interactable also give special linkbox-elevate class privledge as a catchall */
    & :is(a[href]:not(.link-overlay), button, .linkbox-elevate) {
      @apply relative z-1;
    }
  }

  .card-link {
    transition: background-color 0.3s ease, border 0.3s ease, box-shadow 0.3s ease,
      transform 0.5s linear;
    @apply border border-solid border-link-base;
    &:is(:hover, :focus, :focus-visible) {
      @apply -translate-y-3.5 border-link-active bg-theme-primary;
      box-shadow: hsla(var(--theme-stark), 20%) 0px 0px 15px,
        hsla(var(--theme-stark), 15%) 0px 0px 3px 1px;
    }
  }

  .home-link {
    & svg {
      box-shadow: 0px 0px 10px 1px hsl(var(--logo-shadow));
    }
    & .fg {
      transition: transform 0.3s ease-in-out;
    }
    & .border {
      transition: all 1s ease;
    }

    &:is(:hover, :focus, :focus-visible) {
      & .fg {
        transform: translate(-50px, -50px) scale(1.25);
      }
      & .bg {
        fill: var(var(--transparent));
      }
      & .border {
        stroke: hsl(var(--link-active));
      }
    }
  }

  /* normalize content globally */
  .normalize {
    /* general spacing of content */
    & > * {
      /* 1.25em based on paragraph size text-lg lg:text-[1.3125rem] 2xl:text-[1.43775rem], due to spacing for headings */
      @apply mb-[1.40625rem] lg:mb-[1.640625rem] 2xl:mb-[1.7971875rem];
    }
    & > :is(ol, ul) {
      margin-top: 1em;
    }

    /* lists */
    & :is(ol, ul) {
      list-style-position: inside;
      @apply space-y-[0.5em];
    }

    & ol {
      list-style-type: decimal;
    }
    & ol li ol {
      list-style-type: lower-alpha;
    }
    & ol li ol li ol {
      list-style-type: lower-greek;
    }
    & ul {
      list-style-type: disc;
    }
    & ul li ul {
      list-style-type: circle;
    }
    & ul li ul li ul {
      list-style-type: square;
    }

    & li {
      padding-left: 0.375em;
    }
    & :is(ol, ul) li:has(:is(ol, ul)) {
      padding-left: 0.75em;
      list-style: none;
    }
  }
}

@layer utilities {
  .hide-mobile {
    @apply isMobile:hidden !important;
  }
  .hide-desktop {
    @apply isDesktop:hidden !important;
  }

  /* give nav bg less transparency when backdrop filter isn't available */
  .nav-bg {
    background-color: hsla(var(--theme-primary), 99%);
  }
  @supports (backdrop-filter: blur(1px)) {
    .nav-bg {
      background-color: hsla(var(--theme-primary), 85%);
      backdrop-filter: blur(4px);
    }
  }

  .ripple-bg {
    background: var(--ghost) radial-gradient(circle, transparent 1%, var(--ghost) 1%) center/15000%;
  }

  /* credits to xetera */
  .clip-list-image {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 20% 100%);
  }

  /* radix animations */
  .animated-collapsible {
    @apply overflow-hidden data-[state=closed]:animate-collapsible-close data-[state=open]:animate-collapsible-open;
  }

  .animated-arrow {
    @apply transition-transform duration-300 ease-arrow-ease group-data-[state=closed]:-rotate-90;
  }
}
