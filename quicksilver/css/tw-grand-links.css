/* link styling */
@utility show-underline {
  background-position: 0 100%;
}

@utility subtle-underline {
  background-size: 100% 0.0625em;
}

@utility drastic-underline {
  background-size: 100% 0.078125em;
}

@utility link-hide {
  background-size: 0% 0.05em;
}

@utility link-show {
  background-size: 100% 0.05em;
}

/* based off https://github.com/chakra-ui/chakra-ui/blob/main/packages/components/layout/src/link-box.tsx */
@utility link-overlay {
  position: static;
  &:after {
    content: "";
    cursor: inherit;
    transition: transform 0.3s ease;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 0;
    display: block;
    height: 100%;
    width: 100%;
  }
}

@utility link-box {
  position: relative;
  isolation: isolate;
  /* elevate elements that are interactable also give special linkbox-elevate class privilege as a catchall */
  & :is(a[href]:not(.link-overlay), button, .linkbox-elevate) {
    z-index: 1;
  }
}

/* HACK: too lazy to figure out how to pass variant from markdown, much easier to just use classes */
@utility anchor-link {
  /* since color of url in content can't easily be adjusted, use the mask trick instead https://stackoverflow.com/a/66093928/7413060 */
  &:after {
    content: "";
    display: inline-block;
    margin: 0 0.125em;
    margin-left: -1em;
    width: 1em;
    height: 1em;
    /* these are kind of magic numbers based off a few trial and errors on one machine */
    transform: scale(0.85) translateY(0.15em);
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath stroke='currentColor' fill='currentColor' d='m22 15-3-4-3 4h1.906c-.436 2.469-2.438 4.471-4.906 4.906V13h2v-2h-2V9.336c1.543-.459 2.714-1.923 2.714-3.621C15.714 3.666 14.048 2 12 2S8.286 3.666 8.286 5.715c0 1.698 1.171 3.162 2.714 3.621V11H9v2h2v6.906C8.531 19.471 6.529 17.469 6.094 15H8l-3-4-3 4h2.073c.511 3.885 3.929 7 7.927 7s7.416-3.115 7.927-7H22zM10.286 5.715C10.286 4.77 11.055 4 12 4s1.714.77 1.714 1.715c0 .951-.801 1.785-1.714 1.785s-1.714-.834-1.714-1.785z'/%3E%3C/svg%3E");
    mask-size: cover;
    background-color: transparent;
    @media (prefers-reduced-motion: no-preference) {
      transition:
        background-color 0.3s ease-out,
        margin 0.5s ease-in-out;
    }
  }
  &:hover:after {
    background-color: currentColor;
    margin-left: 0.125em;
    @media (prefers-reduced-motion: no-preference) {
      transition:
        background-color 0.7s ease-in,
        margin 0.5s ease-in-out;
    }
  }
}
